FROM python:3.9

RUN cd /usr/src && \
    rm -rf app && \
    git clone --recurse-submodules https://github.com/spyysalo/keras-bert-ner.git app

WORKDIR /usr/src/app

RUN wget http://dl.turkunlp.org/turku-ner-models/combined-ext-model-130220.tar.gz && \
  tar xvzf combined-ext-model-130220.tar.gz

RUN pip install flask keras-bert

CMD python3 predict.py --ner_model_dir combined-ext-model
